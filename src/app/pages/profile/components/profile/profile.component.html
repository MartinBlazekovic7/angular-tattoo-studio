<div class="profile__Body contentBody">
  <div class="profile__Container contentWrapper">
    <div class="profile__ProfileContainer">
      <div class="profile__Header">
        <h3 class="subtitle" style="padding: 24px 0">INFORMATION</h3>
        <div class="buttons">
          <button
            type="submit"
            class="btn btn-white"
            *ngIf="editingProfile"
            (click)="cancelProfileEdit()"
          >
            Otka≈æi
          </button>
          <button
            type="submit"
            class="btn btn-dark"
            *ngIf="editingProfile"
            (click)="submitProfileForm.click()"
          >
            Spremi promjene
          </button>
          <button
            type="submit"
            class="btn btn-dark"
            *ngIf="!editingProfile"
            (click)="startProfileEdit()"
          >
            Uredi profil
          </button>
        </div>
      </div>
      <div class="profile__ProfileInformation">
        <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
          <div class="d-flex justify-content-between align-items-center">
            <p>Full Name</p>
            <p *ngIf="!editingProfile" (dblclick)="startProfileEdit()">
              {{
                currentUserDetails?.displayName?.length
                  ? currentUserDetails?.displayName
                  : "Unknownnown"
              }}
            </p>
            <input
              *ngIf="editingProfile"
              type="text"
              class="form-control w-50"
              formControlName="displayName"
              placeholder="{{
                profileForm.value.displayName ?? 'Enter full name'
              }}"
            />
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <p>First Name</p>
            <p *ngIf="!editingProfile" (dblclick)="startProfileEdit()">
              {{
                currentUserDetails?.firstName?.length
                  ? currentUserDetails?.firstName
                  : "Unknown"
              }}
            </p>
            <input
              *ngIf="editingProfile"
              type="text"
              class="form-control w-50"
              formControlName="firstName"
              placeholder="{{ profileForm.value.firstName ?? 'Enter data' }}"
            />
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <p>Last Name</p>
            <p *ngIf="!editingProfile" (dblclick)="startProfileEdit()">
              {{
                currentUserDetails?.lastName?.length
                  ? currentUserDetails?.lastName
                  : "Unknown"
              }}
            </p>
            <input
              *ngIf="editingProfile"
              type="text"
              class="form-control w-50"
              formControlName="lastName"
              placeholder="{{ profileForm.value.lastName ?? 'Enter data' }}"
            />
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <p>Phone number</p>
            <p *ngIf="!editingProfile" (dblclick)="startProfileEdit()">
              {{
                currentUserDetails?.phoneNumber?.length
                  ? currentUserDetails?.phoneNumber
                  : "Unknown"
              }}
            </p>
            <input
              *ngIf="editingProfile"
              type="tel"
              class="form-control w-50"
              formControlName="phoneNumber"
              placeholder="{{ profileForm.value.phoneNumber ?? 'Enter data' }}"
            />
          </div>
          <input type="submit" #submitProfileForm class="d-none" />
        </form>
      </div>
    </div>
    <hr class="separator" />
    <div class="profile__Orders">
      <div class="profile__Header reverse-header">
        <h3 class="subtitle">PAST ORDERS</h3>
      </div>
      <div class="profile__Accordion">
        <div ngbAccordion [closeOthers]="true">
          <div
            ngbAccordionItem
            *ngFor="let panel of panels"
            [collapsed]="panel !== 'First'"
          >
            <h2 ngbAccordionHeader>
              <button ngbAccordionButton>{{ panel }}</button>
            </h2>
            <div ngbAccordionCollapse>
              <div ngbAccordionBody>
                <ng-template>
                  Anim pariatur cliche reprehenderit, enim eiusmod high life
                  accusamus terry richardson ad squid. 3 wolf moon officia aute,
                  non cupidatat skateboard dolor brunch. Food truck quinoa
                  nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt
                  aliqua put a bird on it squid single-origin coffee nulla
                  assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft
                  beer labore wes anderson cred nesciunt sapiente ea proident.
                  Ad vegan excepteur butcher vice lomo. Leggings occaecat craft
                  beer farm-to-table, raw denim aesthetic synth nesciunt you
                  probably haven't heard of them accusamus labore sustainable
                  VHS.
                </ng-template>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr class="separator" />
    <div class="profile__Reviews">
      <div class="profile__Header">
        <h3 class="subtitle">YOUR REVIEWS</h3>
      </div>
      <div class="profile__Accordion" style="padding-bottom: 24px">
        <ng-container *ngIf="reviews.length; else noReviews"
          ><div ngbAccordion [closeOthers]="true">
            <div ngbAccordionItem *ngFor="let review of reviews">
              <h2 ngbAccordionHeader>
                <button ngbAccordionButton>Rating: {{ review.rating }}</button>
              </h2>
              <div ngbAccordionCollapse>
                <div ngbAccordionBody>
                  <ng-template>
                    <p style="margin-bottom: 0">{{ review.reviewText }}</p>
                  </ng-template>
                </div>
              </div>
            </div>
          </div></ng-container
        >
        <ng-template #noReviews>
          <div class="w-100">
            <i style="display: block; text-align: center"
              >You didn't leave a review yet.</i
            >
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
